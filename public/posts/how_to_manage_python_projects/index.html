<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>How to manage Python projects</title>
    <meta name="description" content="Have you ever struggled to manage your Python projects? Let&#39;s see how Poetry can help manage your Python projects.">
    <meta name="keywords" content='software development, software engineering, blog, Python, Go, Golang, JavaScript, Typescript, aws, Amazon Web Service, neovim, vim, linux, tools'>

    <meta property="og:url" content="https://ryanbutler.online/posts/how_to_manage_python_projects/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="How to manage Python projects">
    <meta property="og:description" content="Have you ever struggled to manage your Python projects? Let&#39;s see how Poetry can help manage your Python projects.">
    <meta property="og:image" content="https://ryanbutler.online/static/images/posts/bruce-jastrow-l1H0sF8-v0k-unsplash.webp">
    <meta property="og:image:secure_url" content="https://ryanbutler.online/static/images/posts/bruce-jastrow-l1H0sF8-v0k-unsplash.webp">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to manage Python projects">
    <meta name="twitter:description" content="Have you ever struggled to manage your Python projects? Let&#39;s see how Poetry can help manage your Python projects.">
    <meta property="twitter:domain" content="https://ryanbutler.online/posts/how_to_manage_python_projects/">
    <meta property="twitter:url" content="https://ryanbutler.online/posts/how_to_manage_python_projects/">
    <meta name="twitter:image" content="https://ryanbutler.online/static/images/posts/bruce-jastrow-l1H0sF8-v0k-unsplash.webp">

    
    <link rel="canonical" href="https://ryanbutler.online/posts/how_to_manage_python_projects/" />

    
    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print">

    
    <link rel="stylesheet" type="text/css" href="/css/main.min.css">

    
    <link id="dark-theme" rel="stylesheet" href="/css/dark.min.css">

    
    <script src="/js/bundle.min.edd985581bf860dfb4507e5885197f1680160c7fe19f23b31e183126d99dd596.js" integrity="sha256-7dmFWBv4YN&#43;0UH5YhRl/FoAWDH/hnyOzHhgxJtmd1ZY="></script>

    
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://ryanbutler.online">
                <img src="https://ryanbutler.online/images/avatar.webp" alt="rbo logo" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://ryanbutler.online">RBO</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://ryanbutler.online/"><span data-feather='home'></span> Home </a>
            </div>
            
            <div class="nav-link">
                <a href="https://ryanbutler.online/posts/"><span data-feather='book'></span> Posts </a>
            </div>
            
            <div class="nav-link">
                <a href="https://ryanbutler.online/projects/"><span data-feather='code'></span> Projects </a>
            </div>
            
            <div class="nav-link">
                <a href="https://ryanbutler.online/tags/"><span data-feather='tag'></span> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com/ryanleonbutler/rbo"><span data-feather='github'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://www.buymeacoffee.com/ryanonline"><span data-feather='coffee'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://ryanbutler.online/index.xml"><span data-feather='rss'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span id="dark-theme-toggle-screen-reader-target" class="sr-only"></span>
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://ryanbutler.online/"><span data-feather='home'></span> Home </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://ryanbutler.online/posts/"><span data-feather='book'></span> Posts </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://ryanbutler.online/projects/"><span data-feather='code'></span> Projects </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://ryanbutler.online/tags/"><span data-feather='tag'></span> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com/ryanleonbutler/rbo"><span data-feather='github'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://www.buymeacoffee.com/ryanonline"><span data-feather='coffee'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://ryanbutler.online/index.xml"><span data-feather='rss'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span id="dark-theme-toggle-screen-reader-target" class="sr-only">theme</span>
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>How to manage Python projects</h1>
        <small role="doc-subtitle">Have you ever struggled to manage your Python projects? Let&#39;s see how Poetry can help manage your Python projects.</small>
        <p class="post-date">
            January 10, 2022
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://ryanbutler.online/tags/python">Python</a></li>
        
            <li class="post-tag"><a href="https://ryanbutler.online/tags/tools">tools</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <p><img src="/images/posts/bruce-jastrow-l1H0sF8-v0k-unsplash.webp" alt=""></p>
<p>From installing different Python versions, creating virtual environments,
installing different libraries and dependencies and creating configuration
files for your project. I have been through this journey a few times, tried
multiple approaches and tools, none which really worked or which I liked.
During 2021, I was listening to a <a href="https://talkpython.fm/episodes/show/314/ask-us-about-modern-python-projects-and-tools">podcast
episode</a>
where the hosts were covering a tool called
<a href="https://python-poetry.org/">Poetry</a>. Some of you might have heard about Poetry
before or even use it already, regardless I will share with you my experience
using Poetry in managing Python projects and how it has made my life so much
simpler. I will also share other tools in this post, which compliment Poetry. I
will also share an example of my workflow when starting a new Python project.
Please follow me on <a href="https://twitter.com/ryanleonbutler">Twitter</a> and
<a href="https://www.linkedin.com/in/ryanleonbutler/">LinkedIn</a> if you like the content
I am creating or just any Python related questions or questions regarding this
post. Thank you for your support!</p>
<h1 id="what-is-poetry">What is Poetry?</h1>
<p>Poetry&rsquo;s main goal is dependency management and packaging in Python. The tool
allows you to declare the libraries your project uses and will manage them for
you, either by installing or updating them. It also has a bunch of other
features, which include creating a &lsquo;pyproject.toml&rsquo;, creating virtual
environments and publishing a Python application or module to
<a href="https://pypi.org/">PyPI</a>.</p>
<h1 id="installation">Installation</h1>
<p>Just like any other Python package, Poetry can be installed using pip.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Install poetry </span>
</span></span><span style="display:flex;"><span>‚ùØ pip install poetry
</span></span></code></pre></div><p>I recommend using <a href="https://github.com/pypa/pipx">pipx</a> in this case. It is
great for installing system wide Python applications in isolation. This avoids
installing Poetry to a specific Python installation or virtual environment. It
also adds the command line application to your system path allowing you to
execute the tool even if other Python virtual environments are active.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Install pipx and add it to the system path </span>
</span></span><span style="display:flex;"><span>‚ùØ brew install pipx 
</span></span><span style="display:flex;"><span>‚ùØ pipx ensure path
</span></span></code></pre></div><p>Just a tip on using pipx, if you wish to use a specific Python version in your
pipx environments, I recommend setting an environment variable in your shell
start-up script (e.g. in &lsquo;config.fish&rsquo;) to change the version to use
<a href="https://asdf-vm.com/">asdf</a>&rsquo;s path. This is important when using Poetry, since
Poetry will inherit the Python version from pipx in order to create its own
virtual environments.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ~/.config/fish/config.fish </span>
</span></span><span style="display:flex;"><span>‚ùØ set -g PIPX_DEFAULT_PYTHON ~/.asdf/shims/python
</span></span></code></pre></div><p>Now we can install Poetry using pipx.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># using pipx to install poetry globally </span>
</span></span><span style="display:flex;"><span>‚ùØ pipx install poetry 
</span></span></code></pre></div><p>For information on pipx, you can also listen to
<a href="https://talkpython.fm/episodes/show/371/pipx-installable-isolated-python-applications">this</a>
podcast episode.</p>
<h1 id="basic-usage">Basic Usage</h1>
<p>project structure you can simply run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># creates new project </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry new my_project
</span></span></code></pre></div><p>You will be presented with a few prompts regarding your project and once
completed a new directory will be created with the below contents:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>// example project structure 
</span></span><span style="display:flex;"><span>my_project 
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ pyproject.toml 
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ README.rst
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ my_project 
</span></span><span style="display:flex;"><span>‚îÇ   ‚îî‚îÄ‚îÄ __init__.py 
</span></span><span style="display:flex;"><span>‚îî‚îÄ‚îÄ tests 
</span></span><span style="display:flex;"><span>    ‚îú‚îÄ‚îÄ __init__.py 
</span></span><span style="display:flex;"><span>    ‚îî‚îÄ test_my_project.py 
</span></span></code></pre></div><p>If you have an existing Python project and directory structure you can navigate
to the project directory and then run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># creates poetry project in existing project </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry init 
</span></span></code></pre></div><p>Enter the details in the prompts and at the end you will notice a new file
called &lsquo;pyproject.toml&rsquo; is created in the root of your new project, if there if
not one present already.</p>
<p>To manage dependencies you can simply use the &lsquo;add&rsquo;, &lsquo;remove&rsquo;, &lsquo;install&rsquo; and
&lsquo;update&rsquo; commands.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># example poetry commands for managing depedencies </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry add boto3  <span style="color:#75715e"># Adds boto3 to depedencies </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry add -D black  <span style="color:#75715e"># Adds black to your developer dependencies </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry remove -D black  <span style="color:#75715e"># Removes black </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry update  <span style="color:#75715e"># Updates all depedencies </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry install <span style="color:#75715e"># Installs all depedencies in the virtual environment</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Poetry also has some bonus features like exporting your dependencies to a
</span></span><span style="display:flex;"><span>requirements file.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Exports all depedencies to requirements file </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry export --without-hashes -o requirements.txt 
</span></span></code></pre></div><h1 id="my-workflow">My Workflow</h1>
<p>Moving to my workflow when starting a new project, I use a combination of
Poetry and asdf to setup my project. Typically I have a &lsquo;workspace&rsquo; or
&lsquo;development&rsquo; folder in my home directory on my local machine. Within this
directory I save store all my projects.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># contents of development folder </span>
</span></span><span style="display:flex;"><span>‚ùØ cd ~/development
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>‚ùØ ls -l 
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">20</span> user  staff   640B Oct <span style="color:#ae81ff">18</span> 21:30 dotfiles/ 
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">4</span> user  staff   128B Aug <span style="color:#ae81ff">25</span> 20:01 scratches/ 
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">5</span> user  staff   160B Jul <span style="color:#ae81ff">23</span> 10:36 scripts/ 
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">14</span> user  staff   448B Sep <span style="color:#ae81ff">20</span> 13:52 tests/
</span></span></code></pre></div><p>First let&rsquo;s check which Python versions we have installed using asdf.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># check available versions </span>
</span></span><span style="display:flex;"><span>‚ùØ asdf list python
</span></span><span style="display:flex;"><span>  3.11.0
</span></span><span style="display:flex;"><span> *3.11.1
</span></span></code></pre></div><p>As you can see from the above I have two Python versions installed, &ldquo;system&rdquo;
which will be the version which is managed by my OS and the OS package manager,
for example HomeBrew on MacOS and one that I previously installed with asdf,
namely 3.11.1. In this project I want to use 3.11.1 and in order to ensure I am
using this Python version, I can set it as the global default on my system  as
well as check the version and location of the binary.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># set python version </span>
</span></span><span style="display:flex;"><span>‚ùØ asdf global python 3.11.1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>‚ùØ python -V 
</span></span><span style="display:flex;"><span>Python 3.11.1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>‚ùØ which python 
</span></span><span style="display:flex;"><span>/Users/butryan/.asdf/shims/python
</span></span></code></pre></div><p>Now that we have confirmed Python 3.11.1 is set as the default Python runtime we
can create our project using Poetry.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># creates new project </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry new my_project
</span></span></code></pre></div><p>We now have our basic skeleton, let&rsquo;s change a few things.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># additional project setup </span>
</span></span><span style="display:flex;"><span>‚ùØ cd my_project <span style="color:#f92672">&amp;&amp;</span> git init 
</span></span><span style="display:flex;"><span>‚ùØ rm README.rst <span style="color:#f92672">&amp;&amp;</span> touch README.md  // I prefer markdown 
</span></span><span style="display:flex;"><span>‚ùØ echo <span style="color:#e6db74">&#39;# my_project&#39;</span> &gt;&gt; README.md 
</span></span><span style="display:flex;"><span>‚ùØ touch my_project/src/main.py 
</span></span><span style="display:flex;"><span>‚ùØ echo <span style="color:#e6db74">&#39;import pprint as print\nprint(&#34;Poetry is great!&#34;)&#39;</span> &gt;&gt; my_project/src/main.py 
</span></span></code></pre></div><p>See basic a example of a &lsquo;pyproject.toml&rsquo; file for a Python project on my GitHub
profile in the &lsquo;python_project&rsquo; repository
<a href="https://github.com/ryanleonbutler/python_project/blob/main/pyproject.toml">here</a>.</p>
<p>You will notice there are a lot of other developer tools listed in the
dev-dependencies section of the above &lsquo;pyproject.toml&rsquo; example. These are just
some additional tools which I added over time into my workflow. I will cover
them in a future post, but for your ease of reference see the links to the
respective home pages for more information:</p>
<ul>
<li><a href="https://pre-commit.com/">Pre-commit</a></li>
<li><a href="https://github.com/psf/black">Black</a></li>
<li><a href="https://flake8.pycqa.org/en/latest/">flake8</a></li>
<li><a href="https://github.com/PyCQA/isort">isort</a></li>
<li><a href="https://docs.pytest.org/en/6.2.x/">pytest</a></li>
<li><a href="https://coverage.readthedocs.io/en/6.0.2/">coverage</a></li>
</ul>
<p>We are now ready to run the Python project. There are two ways you can achieve
this.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. using the Poetry &#39;run&#39; command will run the Python version which Poetry is managing for you </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry run python my_project/main.py 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Poetry is great!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. drop into a new shell with the Poetry Python version as the activated virtual environment </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry shell <span style="color:#f92672">(</span>.venv<span style="color:#f92672">)</span> ‚ùØ python my_project/main.py
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Poetry is great!
</span></span></code></pre></div><p>Note, regarding option 2. above, if you prefer that Poetry creates a virtual
environment in the root if your project, you can set the following
configuration.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># example venv path configuration </span>
</span></span><span style="display:flex;"><span>‚ùØ poetry config --list
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>virtualenvs.in-project <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>‚ùØ poetry config virtualenvs.in-project true
</span></span><span style="display:flex;"><span>‚ùØ poetry config --list
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>virtualenvs.in-project <span style="color:#f92672">=</span> true
</span></span><span style="display:flex;"><span>... 
</span></span></code></pre></div><h1 id="summary">Summary</h1>
<p>It is as simple as that to get started with Poetry. I like how it has abstracted
the repetitive tasks and additional overhead added to the developer in managing
depedencies and virtual environments. I hope my article has inspired you to
try out Poetry, it is a great tool!</p>

        </p>
        
    </div>

    <div class="prev-next">
        
    </div>
</div>

<aside class="post-toc">
    <nav id="toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-poetry">What is Poetry?</a></li>
    <li><a href="#installation">Installation</a></li>
    <li><a href="#basic-usage">Basic Usage</a></li>
    <li><a href="#my-workflow">My Workflow</a></li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
    </nav>
</aside>



    

        </main><footer class="footer">
    
    

    
    <span>&copy; 2023 RBO</span>
    
    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>
